# Standard path additions are defined here, these should be safe to include
# cross-platform.
#
# The paths are only added to PATH if they actually exist in the file system
#
# You can add more on a per-machine basis by defining either of
# these arrays in a ~/.before file. Paths added in ~/.before are extended with
# the defaults defined in this file.
prepend_paths=(
    "/usr/local/sbin"
    "/usr/local/bin"
    "${prepend_paths[@]}"
)

append_paths=(
    "${append_paths[@]}"
    "$HOME/.cabal/bin"
    "${GOPATH:+$GOPATH/bin}"
)

filter_path() {
    printf "%s" "$(printf "%s" "$PATH" | tr ":" "\n" | sed "\|^${1}$|d" | tr "\n" ":")"
}

for new_path in "${prepend_paths[@]}"; do
    if [ "${new_path:-}" ] && [ -d "$new_path" ]; then
        PATH="$(filter_path "$new_path")"
        PATH="$new_path:${PATH%:}"
    fi
done

for new_path in "${append_paths[@]}"; do
    if [ "${new_path:-}" ] && [ -d "$new_path" ]; then
        PATH="$(filter_path "$new_path")"
        PATH="${PATH%:}:$new_path"
    fi
done

# Cleanup
unset -f filter_path
unset new_path prepend_paths append_paths
